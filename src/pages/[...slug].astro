---
import Layout from "../layouts/Layout.astro";
import client from '../umbraco-client';

import Page from '../components/Page.astro';
// import Article from '../components/Article.astro';

export async function getStaticPaths() {
	const pages = await client.getContentByType('page');
	// const articles = await client.getContentByType('article');
	// console.log([...pages, ...articles].map((page) => {
	// 	return {
	// 	params: { slug:page.route.path },
	// 	props: page.properties,
	// 	};
	// }));
	return [...pages].map((page) => ({
		params: { slug: page.route.path.replace(/^\/|\/$/,"") },
		props: page
	}))
	
}

const { contentType, route, name, id } = Astro.props;
---

<Layout {name} path={route.path} {id}>
	{
		() => {
			switch(contentType) {
				// case "article":
				// 	return <Article props={Astro.props}/>
				case "page":
					return <Page props={Astro.props}/>
				default:
					return null
			}
		}
	}
</Layout>